(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ee4fdaa"],{"205c":function(t,e,i){"use strict";var a=i("2d06"),o=i.n(a);o.a},"26c5":function(t,e,i){"use strict";var a=i("ce85"),o=i.n(a);o.a},"2d06":function(t,e,i){},"333d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},o=[];i("c5f6");Math.easeInOutQuad=function(t,e,i,a){return t/=a/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function r(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,i){var a=l(),o=t-a,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var l=Math.easeInOutQuad(c,a,o,e);r(l),c<e?n(t):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&s(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,d=(i("26c5"),i("2877")),p=Object(d["a"])(u,a,o,!1,null,"6b68b94e",null);e["a"]=p.exports},ce85:function(t,e,i){},dcdc6:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",{staticStyle:{"overflow-y":"auto"}},[i("el-header",{staticClass:"manager-header",attrs:{height:"30px"}},[i("h4",{staticClass:"manager-h4"},[i("i",{staticClass:"manager-icon el-icon-arrow-left",on:{click:t.turnToPage}}),t._v("\n      "+t._s(t.$route.meta.title)+"\n    ")])]),t._v(" "),i("el-main",[t.isChecked?i("el-row",{staticStyle:{"padding-bottom":"18px"}},[i("el-col",{attrs:{span:4}},[i("span",{staticStyle:{"font-size":"14px"}},[t._v("创建人")]),t._v(" "),i("el-select",{attrs:{size:"small"},on:{change:t.filterTable},model:{value:t.creator,callback:function(e){t.creator=e},expression:"creator"}},[i("el-option",{attrs:{label:"不限",value:null}}),t._v(" "),t._l(t.creators,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}))],2)],1),t._v(" "),i("el-col",{attrs:{span:15}},[i("span",{staticStyle:{"font-size":"14px"}},[t._v("所属分组")]),t._v(" "),i("el-select",{attrs:{size:"small"},on:{change:t.filterTable},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[i("el-option",{attrs:{label:"不限",value:null}}),t._v(" "),t._l(t.groups,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1),t._v(" "),i("el-col",{attrs:{span:3}},[i("div",{staticClass:"manager-input"},[i("el-input",{attrs:{"prefix-icon":"el-icon-search",size:"small",placeholder:"搜索概览名称"},on:{input:t.filterTable},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1)]),t._v(" "),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{icon:"el-icon-s-fold",size:"small",type:"primary"},on:{click:function(e){t.modal.sortShow=!0}}},[t._v("设置概览显示顺序")])],1)],1):i("el-row",{staticStyle:{"padding-bottom":"18px"}},[i("el-col",[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("增加可访问成员")]),t._v(" "),i("el-button",{attrs:{size:"mini"}},[t._v("重置分享设置")]),t._v(" "),i("el-popconfirm",{attrs:{width:"213",confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"#ffbf00",title:"删除所选概览?"},on:{onConfirm:t.delSelectDashboard}},[i("el-button",{staticStyle:{color:"red"},attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v("删除")])],1),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.$refs.multipleTable.clearSelection()}}},[t._v("取消")])],1)],1),t._v(" "),i("el-table",{ref:"multipleTable",attrs:{data:t.filterGroup},on:{"selection-change":t.selectionChange}},[i("el-table-column",{attrs:{type:"selection"}}),t._v(" "),i("el-table-column",{attrs:{width:"309",prop:"name",label:"名称"}}),t._v(" "),i("el-table-column",{attrs:{width:"239",prop:"typeName",label:"所属分组"}}),t._v(" "),i("el-table-column",{attrs:{width:"725",label:"共享给..."},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isPublic?i("span",[t._v("仅自己可见")]):i("span",[t._v("不是你创建的概览，须复制为自己的概览后，方可分享给Ta人")])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"214",prop:"userName",label:"创建人"}}),t._v(" "),i("el-table-column",{attrs:{width:"288",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return 0==e.row.isPublic?[0==e.row.isPublic?i("span",[i("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("分享设置")]),t._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"318",trigger:"click"},on:{show:function(i){return t.popoverInfo(e.row)}},model:{value:e.row.edit,callback:function(i){t.$set(e.row,"edit",i)},expression:"scope.row.edit"}},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("p",{staticStyle:{"text-align":"center"}},[t._v("编辑此概览")]),t._v(" "),i("p",[t._v("概览名称")]),t._v(" "),i("el-row",[i("el-col",{attrs:{span:22}},[i("el-input",{attrs:{size:"mini"},model:{value:t.edit.dashboardName,callback:function(e){t.$set(t.edit,"dashboardName",e)},expression:"edit.dashboardName"}})],1)],1),t._v(" "),i("p",[t._v("概览分组")]),t._v(" "),i("el-select",{attrs:{size:"mini"},model:{value:t.edit.groupName,callback:function(e){t.$set(t.edit,"groupName",e)},expression:"edit.groupName"}},t._l(t.groups,(function(t){return i("el-option",{key:t.id,attrs:{disabled:"分享给我的概览"===t.name,label:t.name,value:t.id}})})),1)],1),t._v(" "),i("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.$set(e.row,"edit",!1)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.editDashboard(e.row)}}},[t._v("确定")])],1),t._v(" "),i("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer",margin:"0px 20px"},attrs:{slot:"reference"},on:{click:function(i){e.row.move?t.$set(e.row,"edit",!0):t.$set(e.row,"edit",!1)}},slot:"reference"})]),t._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click"},model:{value:e.row.del,callback:function(i){t.$set(e.row,"del",i)},expression:"scope.row.del"}},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("p",[i("i",{staticClass:"el-icon-warning",staticStyle:{color:"#ffbf00"}}),t._v("删除概览?")]),t._v(" "),i("p",[t._v("删除概览")])]),t._v(" "),i("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.$set(e.row,"del",!1)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.delDashboard(e.row)}}},[t._v("确定")])],1),t._v(" "),i("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer",color:"red"},attrs:{slot:"reference"},on:{click:function(i){e.row.move?t.$set(e.row,"del",!0):t.$set(e.row,"del",!1)}},slot:"reference"})])],1):t._e()]:void 0}}],null,!0)})],1),t._v(" "),i("pagination",{attrs:{hidden:t.filterGroup.length<=0,total:t.pagination.total,page:t.pagination.page,limit:t.pagination.limit},on:{"update:page":function(e){return t.$set(t.pagination,"page",e)},"update:limit":function(e){return t.$set(t.pagination,"limit",e)},pagination:t.changePage}})],1),t._v(" "),i("el-dialog",{attrs:{title:"分享设置",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-row",[i("el-col",{attrs:{span:15}},[i("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[i("el-radio",{attrs:{label:1}},[t._v("仅自己可见")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("全部成员")]),t._v(" "),i("el-radio",{attrs:{label:3}},[t._v("指定成员")])],1)],1)],1),t._v(" "),1===t.radio?i("div",[i("p",[t._v("设置后，此概览将仅可你自己查看。其他成员均不可查看。")])]):t._e(),t._v(" "),3===t.radio?i("div",[i("el-select",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{filterable:"",multiple:"",size:"small",placeholder:"搜索成员姓名"},model:{value:t.memberName,callback:function(e){t.memberName=e},expression:"memberName"}},[i("el-option-group",{attrs:{label:"角色"}},t._l(t.roles,(function(t){return i("el-option",{key:t,attrs:{label:"admin"===t?"管理员":"成员",value:t}})})),1),t._v(" "),i("el-option-group",{attrs:{label:"账户"}},t._l(t.accounts,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1):t._e(),t._v(" "),i("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("保存")])],1)],1),t._v(" "),i("sort",{attrs:{"sort-groups":t.groups,"sort-show-visible":t.modal.sortShow},on:{"update-group":t.findGroup,"close-sort":t.handleCloseSort}})],1)},o=[],n=(i("7f7f"),i("23ba")),r=i("5fd4"),l=i("9a71"),s=i("333d"),c=i("b562"),u={name:"DashboardManager",components:{Sort:l["a"],Pagination:s["a"]},data:function(){return{roles:[],accounts:[],creator:null,creators:[],group:null,groups:[],dashboards:[],isChecked:!0,dialogVisible:!1,radio:1,memberName:[],modal:{sortShow:!1},edit:{dashboardName:"",groupName:""},filterGroup:[],filterName:"",selectDel:!1,selectionGroup:[],pagination:{page:1,limit:10,total:0}}},created:function(){this.findGroup(),this.findMember()},methods:{findGroup:function(){var t=this;Object(n["d"])().then((function(e){t.groups=e,t.dashboards=[];var i=function(e){t.groups[e].list.some((function(i){i.type===t.groups[e].id&&(i.typeName=t.groups[e].name)})),t.dashboards=t.dashboards.concat(t.groups[e].list)};for(var a in t.groups)i(a);t.filterGroup=t.dashboards.slice((t.pagination.page-1)*t.pagination.limit,t.pagination.limit),t.pagination.total=t.dashboards.length,t.dashboards.some((function(e){t.creators.indexOf(e.userName)&&t.creators.push(e.userName)}))}))},findMember:function(){var t=this;Object(c["g"])().then((function(e){e.some((function(e){t.roles.indexOf(e.role)<=-1&&t.roles.push(e.role);var i={label:e.account,value:e.id};t.accounts.push(i)}))}))},turnToPage:function(){var t={},e=t.name,i=t.params,a=t.query;e="menu-dashboard",a||(a=this.$route.query),this.$router.push({name:e,params:i,query:a})},handleCloseSort:function(){this.modal.sortShow=!1},selectionChange:function(t){this.selectionGroup=t,t.length>0?this.isChecked=!1:this.isChecked=!0},filterTable:function(){var t=this;this.filterGroup=JSON.parse(JSON.stringify(this.dashboards)),null!=this.creator&&""!=this.creator&&(this.filterGroup=this.dashboards.filter((function(e){return e.userName==t.creator}))),null!=this.group&&""!=this.group&&(this.filterGroup=this.dashboards.filter((function(e){return e.type==t.group}))),null!=this.filterName&&""!=this.filterName&&(this.filterGroup=this.dashboards.filter((function(e){return e.name.indexOf(t.filterName)>-1}))),this.pagination.total=this.filterGroup.length},popoverInfo:function(t){this.edit.dashboardName=JSON.parse(JSON.stringify(t.name)),this.edit.groupName=JSON.parse(JSON.stringify(t.type))},editDashboard:function(t){t.name=this.edit.dashboardName,t.type=this.edit.groupName,this.groups.some((function(e){e.id===t.type&&(t.sort=e.list.length)})),Object(r["d"])(t).then((function(t){})),this.findGroup()},delDashboard:function(t){Object(r["b"])(t.id).then((function(t){})),this.findGroup()},delSelectDashboard:function(){for(var t in this.selectionGroup)Object(r["b"])(this.selectionGroup[t].id).then((function(t){}));this.findGroup()},querySearch:function(){},changePage:function(t){this.dashboards.length-(t.page-1)*t.limit<t.limit?this.filterGroup=this.dashboards.slice((t.page-1)*t.limit):this.filterGroup=this.dashboards.slice((t.page-1)*t.limit,t.limit)}}},d=u,p=(i("205c"),i("2877")),m=Object(p["a"])(d,a,o,!1,null,null,null);e["default"]=m.exports}}]);