(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ee4fdaa"],{"205c":function(e,t,i){"use strict";var o=i("2d06"),a=i.n(o);a.a},"26c5":function(e,t,i){"use strict";var o=i("ce85"),a=i.n(o);a.a},"2d06":function(e,t,i){},"333d":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];i("c5f6");Math.easeInOutQuad=function(e,t,i,o){return e/=o/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,i){var o=l(),a=e-o,s=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=s;var l=Math.easeInOutQuad(c,o,a,t);r(l),c<t?n(e):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,d=(i("26c5"),i("2877")),p=Object(d["a"])(u,o,a,!1,null,"6b68b94e",null);t["a"]=p.exports},ce85:function(e,t,i){},dcdc6:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-header",{staticClass:"manager-header",attrs:{height:"30px"}},[i("h4",{staticClass:"manager-h4"},[i("i",{staticClass:"manager-icon el-icon-arrow-left",on:{click:e.turnToPage}}),e._v("\n      "+e._s(e.$route.meta.title)+"\n    ")])]),e._v(" "),i("el-main",[e.isChecked?i("el-row",{staticStyle:{"padding-bottom":"18px"}},[i("el-col",{attrs:{span:4}},[i("span",{staticStyle:{"font-size":"14px"}},[e._v("创建人")]),e._v(" "),i("el-select",{attrs:{size:"small"},on:{change:e.filterTable},model:{value:e.creator,callback:function(t){e.creator=t},expression:"creator"}},[i("el-option",{attrs:{label:"不限",value:null}}),e._v(" "),e._l(e.creators,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],2)],1),e._v(" "),i("el-col",{attrs:{span:15}},[i("span",{staticStyle:{"font-size":"14px"}},[e._v("所属分组")]),e._v(" "),i("el-select",{attrs:{size:"small"},on:{change:e.filterTable},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},[i("el-option",{attrs:{label:"不限",value:null}}),e._v(" "),e._l(e.groups,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2)],1),e._v(" "),i("el-col",{attrs:{span:3}},[i("div",{staticClass:"manager-input"},[i("el-input",{attrs:{"prefix-icon":"el-icon-search",size:"small",placeholder:"搜索概览名称"},on:{input:e.filterTable},model:{value:e.filterName,callback:function(t){e.filterName=t},expression:"filterName"}})],1)]),e._v(" "),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{icon:"el-icon-s-fold",size:"small",type:"primary"},on:{click:function(t){e.modal.sortShow=!0}}},[e._v("设置概览显示顺序")])],1)],1):i("el-row",{staticStyle:{"padding-bottom":"18px"}},[i("el-col",[i("el-button",{attrs:{size:"mini"}},[e._v("增加可访问成员")]),e._v(" "),i("el-button",{attrs:{size:"mini"}},[e._v("重置分享设置")]),e._v(" "),i("el-popconfirm",{attrs:{width:"213",confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"#ffbf00",title:"删除所选概览?"},on:{onConfirm:e.delSelectDashboard}},[i("el-button",{staticStyle:{color:"red"},attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v("删除")])],1),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.multipleTable.clearSelection()}}},[e._v("取消")])],1)],1),e._v(" "),i("el-table",{ref:"multipleTable",attrs:{data:e.filterGroup},on:{"selection-change":e.selectionChange}},[i("el-table-column",{attrs:{type:"selection"}}),e._v(" "),i("el-table-column",{attrs:{width:"309",prop:"name",label:"名称"}}),e._v(" "),i("el-table-column",{attrs:{width:"239",prop:"typeName",label:"所属分组"}}),e._v(" "),i("el-table-column",{attrs:{width:"742",label:"共享给..."},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.isPublic?i("span",[e._v("仅自己可见")]):i("span",[e._v("不是你创建的概览，须复制为自己的概览后，方可分享给Ta人")])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"214",prop:"userName",label:"创建人"}}),e._v(" "),i("el-table-column",{attrs:{width:"288",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return 0==t.row.isPublic?[0==t.row.isPublic?i("span",[i("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("分享设置")]),e._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"318",trigger:"click"},on:{show:function(i){return e.popoverInfo(t.row)}},model:{value:t.row.edit,callback:function(i){e.$set(t.row,"edit",i)},expression:"scope.row.edit"}},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("p",{staticStyle:{"text-align":"center"}},[e._v("编辑此概览")]),e._v(" "),i("p",[e._v("概览名称")]),e._v(" "),i("el-row",[i("el-col",{attrs:{span:22}},[i("el-input",{attrs:{size:"mini"},model:{value:e.edit.dashboardName,callback:function(t){e.$set(e.edit,"dashboardName",t)},expression:"edit.dashboardName"}})],1)],1),e._v(" "),i("p",[e._v("概览分组")]),e._v(" "),i("el-select",{attrs:{size:"mini"},model:{value:e.edit.groupName,callback:function(t){e.$set(e.edit,"groupName",t)},expression:"edit.groupName"}},e._l(e.groups,(function(e){return i("el-option",{key:e.id,attrs:{disabled:"分享给我的概览"===e.name,label:e.name,value:e.id}})})),1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.$set(t.row,"edit",!1)}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.editDashboard(t.row)}}},[e._v("确定")])],1),e._v(" "),i("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer",margin:"0px 20px"},attrs:{slot:"reference"},on:{click:function(i){t.row.move?e.$set(t.row,"edit",!0):e.$set(t.row,"edit",!1)}},slot:"reference"})]),e._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click"},model:{value:t.row.del,callback:function(i){e.$set(t.row,"del",i)},expression:"scope.row.del"}},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("p",[i("i",{staticClass:"el-icon-warning",staticStyle:{color:"#ffbf00"}}),e._v("删除概览?")]),e._v(" "),i("p",[e._v("删除概览")])]),e._v(" "),i("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.$set(t.row,"del",!1)}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.delDashboard(t.row)}}},[e._v("确定")])],1),e._v(" "),i("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer",color:"red"},attrs:{slot:"reference"},on:{click:function(i){t.row.move?e.$set(t.row,"del",!0):e.$set(t.row,"del",!1)}},slot:"reference"})])],1):e._e()]:void 0}}],null,!0)})],1),e._v(" "),i("pagination",{attrs:{hidden:e.filterGroup.length<=0,total:e.filterGroup.length,page:e.page,limit:e.limit},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.limit=t},pagination:e.changePage}})],1),e._v(" "),i("el-dialog",{attrs:{title:"分享设置",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-row",[i("el-col",{attrs:{span:15}},[i("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[i("el-radio",{attrs:{label:1}},[e._v("仅自己可见")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("全部成员")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("指定成员")])],1)],1)],1),e._v(" "),1===e.radio?i("div",[i("p",[e._v("设置后，此概览将仅可你自己查看。其他成员均不可查看。")])]):e._e(),e._v(" "),3===e.radio?i("div",[i("el-input",{staticStyle:{"margin-top":"10px"},attrs:{size:"small",placeholder:"搜索成员姓名"},model:{value:e.memberName,callback:function(t){e.memberName=t},expression:"memberName"}})],1):e._e(),e._v(" "),i("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("保存")])],1)],1),e._v(" "),i("sort",{attrs:{"sort-groups":e.groups,"sort-show-visible":e.modal.sortShow},on:{"update-group":e.findGroup,"close-sort":e.handleCloseSort}})],1)},a=[],n=(i("7f7f"),i("23ba")),r=i("5fd4"),l=i("9a71"),s=i("333d"),c={name:"DashboardManager",components:{Sort:l["a"],Pagination:s["a"]},data:function(){return{page:1,limit:10,creator:null,creators:[],group:null,groups:[],dashboards:[],isChecked:!0,dialogVisible:!1,radio:1,memberName:"",modal:{sortShow:!1},edit:{dashboardName:"",groupName:""},filterGroup:[],filterName:"",selectDel:!1,selectionGroup:[]}},created:function(){this.findGroup()},methods:{findGroup:function(){var e=this;Object(n["d"])().then((function(t){e.groups=t,e.dashboards=[];var i=function(t){e.groups[t].list.some((function(i){i.type===e.groups[t].id&&(i.typeName=e.groups[t].name)})),e.dashboards=e.dashboards.concat(e.groups[t].list)};for(var o in e.groups)i(o);e.filterGroup=JSON.parse(JSON.stringify(e.dashboards)),e.dashboards.some((function(t){e.creators.indexOf(t.userName)&&e.creators.push(t.userName)}))}))},turnToPage:function(){var e={},t=e.name,i=e.params,o=e.query;t="menu-dashboard",o||(o=this.$route.query),this.$router.push({name:t,params:i,query:o})},handleCloseSort:function(){this.modal.sortShow=!1},selectionChange:function(e){this.selectionGroup=e,e.length>0?this.isChecked=!1:this.isChecked=!0},filterTable:function(){var e=this;this.filterGroup=JSON.parse(JSON.stringify(this.dashboards)),null!=this.creator&&""!=this.creator&&(this.filterGroup=this.filterGroup.filter((function(t){return t.userName==e.creator}))),null!=this.group&&""!=this.group&&(this.filterGroup=this.filterGroup.filter((function(t){return t.type==e.group}))),null!=this.filterName&&""!=this.filterName&&(this.filterGroup=this.filterGroup.filter((function(t){return t.name.indexOf(e.filterName)>-1})))},popoverInfo:function(e){this.edit.dashboardName=JSON.parse(JSON.stringify(e.name)),this.edit.groupName=JSON.parse(JSON.stringify(e.type))},editDashboard:function(e){e.name=this.edit.dashboardName,e.type=this.edit.groupName,this.groups.some((function(t){t.id===e.type&&(e.sort=t.list.length)})),Object(r["d"])(e).then((function(e){})),this.findGroup()},delDashboard:function(e){Object(r["b"])(e.id).then((function(e){})),this.findGroup()},delSelectDashboard:function(){for(var e in this.selectionGroup)Object(r["b"])(this.selectionGroup[e].id).then((function(e){}));this.findGroup()},changePage:function(){}}},u=c,d=(i("205c"),i("2877")),p=Object(d["a"])(u,o,a,!1,null,null,null);t["default"]=p.exports}}]);