(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c5a6e1ce"],{"2b74":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{ref:"tableMain",staticStyle:{width:"100%"},attrs:{data:t.insideTableData}},t._l(t.insideColumns,(function(t){return n("el-table-column",{attrs:{label:t.label,align:t.align,width:t.width}})})),1)],1)},o=[],r={name:"Table",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},editable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"}},data:function(){return{insideColumns:[],insideTableData:[],searchKey:"",searchValue:"",default_column:{align:"center",width:"auto"}}},watch:{columns:function(t){this.handleColumns(t),this.setDefaultSearchKey()},value:function(){this.handleTableData()}},mounted:function(){this.handleColumns(this.columns),this.setDefaultSearchKey(),this.handleTableData()},methods:{supportEdit:function(t,e){},supportHandle:function(t){},handleColumns:function(t){var e=this;this.insideColumns=t.map((function(t,n){var a=Object.assign({},e.default_column,t);return a.editable&&(a=e.supportEdit(a,n)),"handle"===a.key&&(a=e.supportHandle(a)),a}))},setDefaultSearchKey:function(t){},handleTableData:function(){this.insideTableData=this.value.map((function(t,e){var n=t;return n.initRowIndex=e,n}))}}},s=r,i=n("2877"),l=Object(i["a"])(s,a,o,!1,null,null,null),c=l.exports;e["a"]=c},"7d99":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return i}));var a=n("b775");function o(t){return Object(a["a"])({url:"/metadata/event",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/metadata/event",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/metadata/event/prop",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/metadata/event/prop",method:"post",data:t})}},9406:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("custom-header",{attrs:{"show-name":t.$route.meta.title}},[n("div",{attrs:{slot:"tools"},slot:"tools"},[t.componentFlag.enableDatePick?n("div",{staticStyle:{"margin-right":"40px","align-self":"center",display:"flex"}},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.componentOption.datePickerOptions},model:{value:t.query.dateRange,callback:function(e){t.$set(t.query,"dateRange",e)},expression:"query.dateRange"}}),t._v(" "),n("i",{staticClass:"el-icon-close",staticStyle:{"align-self":"center","margin-left":"20px"},on:{click:function(e){t.componentFlag.enableDatePick=!1}}})],1):n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{icon:"el-icon-date"},on:{click:function(e){t.componentFlag.enableDatePick=!0}}}),t._v(" "),n("el-button-group",[n("el-button",{attrs:{icon:"el-icon-refresh-left"}}),t._v(" "),n("el-button",{attrs:{icon:"el-icon-share"}}),t._v(" "),n("el-button",{attrs:{icon:"el-icon-more"}})],1),t._v(" "),n("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleClickPlus,"visible-change":t.handleClickPlusVisible}},[n("span",[n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-plus",type:"success"}})],1),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{icon:"el-icon-arrow-right",command:"createFromBookmarks"}},[t._v("从书签添加")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"createComponent"}},[t._v("新建组件")]),t._v(" "),n("el-dropdown-item",[t._v("新建描述")])],1)],1)],1)]),t._v(" "),n("el-popover",{ref:"createBookmarksPopover",staticClass:"createBookmarks",attrs:{placement:"bottom-start",width:"200",trigger:"manual"},model:{value:t.componentFlag.enableCreateFromBookmarks,callback:function(e){t.$set(t.componentFlag,"enableCreateFromBookmarks",e)},expression:"componentFlag.enableCreateFromBookmarks"}},[n("el-menu",{on:{select:t.handleSelectBookmarks}},t._l(t.pre_data.bookmarks,(function(e,a){return n("el-menu-item-group",[n("template",{slot:"title"},[t._v(t._s(a))]),t._v(" "),t._l(e,(function(e){return n("el-menu-item",{attrs:{index:e.id}},[t._v(t._s(e.name))])}))],2)})),1)],1),t._v(" "),n("div",{staticClass:"component"},t._l(t.pre_data.dashboard.items,(function(e,a){return n("meta-event-analytics",{attrs:{bookmarks:t.getBookmarks(a),meta_props:t.pre_data.meta_props,meta_events:t.pre_data.meta_events,"v-if":"/meta_event_analytics/"==t.getBookmarks(a).type}})})),1),t._v(" "),n("el-dialog",{attrs:{title:"新建组件",visible:t.componentFlag.enableCreateComponent,width:"30%",center:""},on:{"update:visible":function(e){return t.$set(t.componentFlag,"enableCreateComponent",e)}}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"hover"},nativeOn:{click:function(e){return t.jump("menu-analyze-meta-event")}}},[t._v("\n            元数据分析\n          ")])],1)],1)],1),t._v(" "),n("router-view")],1)},o=[],r=(n("db97"),n("db72")),s=(n("7f7f"),n("96cf"),n("3b8d")),i=n("bc5d"),l=n("2f62"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("card",[n("template",{slot:"title"},[t._v(t._s(t.event_name))]),t._v(" "),n("template",{slot:"tools"}),t._v(" "),n("template",{slot:"content"},[n("custom-table",{attrs:{columns:t.columns,value:t.value}})],1)],2)},u=[],d=n("2b74"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"box-card small_card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t._t("title"),t._v(" "),t._t("tools"),t._v(" "),n("el-dropdown",{staticStyle:{float:"right"}},[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-more-outline el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[t._v("小")]),t._v(" "),n("el-dropdown-item",[t._v("中")]),t._v(" "),n("el-dropdown-item",[t._v("大")]),t._v(" "),n("el-dropdown-item",{attrs:{divided:""}},[t._v("设置")]),t._v(" "),n("el-dropdown-item",[t._v("删除")])],1)],1)],2),t._v(" "),t._t("content")],2)},p=[],h={name:"Card"},f=h,v=(n("c7ae"),n("2877")),b=Object(v["a"])(f,m,p,!1,null,null,null),_=b.exports,k=_,g={name:"MetaEventAnalytics",components:{Card:k,CustomTable:d["a"]},props:{meta_props:{type:Array,default:function(){return[]}},meta_events:{type:Array,default:function(){return[]}},bookmarks:{type:Object,default:function(){return{}}}},data:function(){return{columns:[],value:[],event_id:"",event_name:""}},mounted:function(){this.handleData(),this.handleColumns()},methods:{handleData:function(){var t=JSON.parse(this.bookmarks.data);this.event_id=t.measures,this.event_name=this.getMetaEvent(this.event_id).showName},getMetaEvent:function(t){for(var e in this.meta_events){var n=this.meta_events[e];if(Object.is(t,n.id))return n}},handleColumns:function(){console.log("handleColumns");var t=this.getMetaEvent(this.event_id);for(var e in t.propIds){var n=t.propIds[e],a=this.meta_props[n];this.columns.push({prop:a.name,label:a.showName})}}}},w=g,y=Object(v["a"])(w,c,u,!1,null,null,null),C=y.exports,O=C,j=n("5fd4"),x=n("7d99"),B={name:"Dashboard",components:{CustomHeader:i["a"],MetaEventAnalytics:O},data:function(){return{query:{id:"",dateRange:[]},componentOption:{datePickerOptions:{}},componentFlag:{enableDatePick:!1,enableCreateComponent:!1,enableCreateFromBookmarks:!1},pre_data:{bookmarks:{},bookmarksIdMapping:{},dashboards:[],dashboard:{items:[]},meta_props:[],meta_events:[]},save_data:{}}},watch:{$route:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.query.id=this.$route.query.id,t.next=3,this.fetchDashboardInfo();case 3:this.$route.meta.title=this.pre_data.dashboard.name;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchDashboards();case 2:this.query.id=this.$route.query.id,!this.query.id&&this.pre_data.dashboards.length>0&&(this.query.id=this.pre_data.dashboards[0]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),created:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.fetchBookmarks(),t.next=3,this.fetchDashboardInfo();case 3:return t.next=5,this.fetchMetaEventProps();case 5:return t.next=7,this.fetchMetaEvent();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:Object(r["a"])({},Object(l["b"])(["getGroupBookmarks"]),{getBookmarks:function(t){return console.log("sdsdsdsds"),this.pre_data.bookmarksIdMapping[t]},fetchMetaEventProps:function(){var t=this;return new Promise((function(e,n){Object(x["d"])().then((function(n){for(var a in n.items)t.pre_data.meta_props[n.items[a].id]=n.items[a];e()}))}))},fetchMetaEvent:function(){var t=this;return new Promise((function(e,n){Object(x["c"])().then((function(n){t.pre_data.meta_events=n.items,e()}))}))},fetchDashboardInfo:function(){var t=this;return new Promise((function(e,n){Object(j["c"])(t.query.id).then((function(n){t.pre_data.dashboard=n,e()}))}))},fetchDashboards:function(){return new Promise((function(t,e){t()}))},fetchBookmarks:function(){var t=this;this.getGroupBookmarks().then((function(e){for(var n in console.log("getGroupBookmarks"),t.pre_data.bookmarks=e,t.pre_data.bookmarks)for(var a in t.pre_data.bookmarks[n]){var o=t.pre_data.bookmarks[n][a];t.pre_data.bookmarksIdMapping[o.id]=o}}))},handleClickPlus:function(t){Object.is(t,"createComponent")?this.componentFlag.enableCreateComponent=!0:Object.is(t,"createFromBookmarks")&&(this.componentFlag.enableCreateFromBookmarks=!0,console.log())},handleClickPlusVisible:function(t){t&&(this.componentFlag.enableCreateFromBookmarks=!1)},jump:function(t){this.$router.push({name:t,query:this.$route.query})},handleSelectBookmarks:function(t){this.pre_data.bookmarksIdMapping[t];this.componentFlag.enableCreateFromBookmarks=!1,this.pre_data.dashboard.items[t]="{}",Object(j["d"])(this.pre_data.dashboard).then((function(t){}))}})},F=B,D=(n("f8a7"),Object(v["a"])(F,a,o,!1,null,null,null));e["default"]=D.exports},acf4:function(t,e,n){},bc5d:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"custom-header"},[n("div",{staticClass:"custom-header-title"},[n("span",[n("h3",[t._v(t._s(t.showName))])]),t._v(" "),t._t("title")],2),t._v(" "),n("div",{staticClass:"custom-tools"},[t._t("tools")],2)])},o=[],r=(n("e67d"),{name:"CustomHeader",props:{showName:{type:String,default:""}}}),s=r,i=n("2877"),l=Object(i["a"])(s,a,o,!1,null,null,null),c=l.exports;e["a"]=c},c7ae:function(t,e,n){"use strict";var a=n("f919"),o=n.n(a);o.a},e67d:function(t,e,n){},f8a7:function(t,e,n){"use strict";var a=n("acf4"),o=n.n(a);o.a},f919:function(t,e,n){}}]);