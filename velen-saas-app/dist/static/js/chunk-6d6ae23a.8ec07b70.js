(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d6ae23a"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),Math.easeInOutQuad=function(t,e,a,o){return t/=o/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function n(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(t,e,a){var r=s(),i=t-r,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var s=Math.easeInOutQuad(c,r,i,e);n(s),c<e?o(t):a&&"function"===typeof a&&a()};u()}},6724:function(t,e,a){"use strict";a("8d41");var o="@@wavesContext";function n(t,e){function a(a){var o=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},o),s=n.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var r=s.getBoundingClientRect(),i=s.querySelector(".waves-ripple");switch(i?i.className="waves-ripple":(i=document.createElement("span"),i.className="waves-ripple",i.style.height=i.style.width=Math.max(r.width,r.height)+"px",s.appendChild(i)),n.type){case"center":i.style.top=r.height/2-i.offsetHeight/2+"px",i.style.left=r.width/2-i.offsetWidth/2+"px";break;default:i.style.top=(a.pageY-r.top-i.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",i.style.left=(a.pageX-r.left-i.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return i.style.backgroundColor=n.color,i.className="waves-ripple z-active",!1}}return t[o]?t[o].removeHandle=a:t[o]={removeHandle:a},a}var s={bind:function(t,e){t.addEventListener("click",n(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[o].removeHandle,!1),t.addEventListener("click",n(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[o].removeHandle,!1),t[o]=null,delete t[o]}},r=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(r)),s.install=r;e["a"]=s},"8d41":function(t,e,a){},"9b3c":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("custom-header",{attrs:{"show-name":t.resolveName()}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("el-dropdown",{on:{command:t.handleSelect}},[a("i",{staticClass:"el-icon-arrow-down el-icon--right"}),t._v(" "),a("el-dropdown-menu",[a("el-dropdown-item",{attrs:{command:""}},[t._v("全部书签")]),t._v(" "),t._l(t.types,(function(e){return a("el-dropdown-item",{attrs:{command:e.command}},[t._v(t._s(e.cname))])}))],2)],1)],1),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[a("el-link",{attrs:{disabled:""}},[t._v("共"+t._s(t.total)+"个")])],1),t._v(" "),a("span",{staticStyle:{"margin-right":"15px"},attrs:{slot:"tools"},slot:"tools"},[a("el-input",{attrs:{placeholder:"请输入内容","suffix-icon":"el-icon-search"},on:{change:t.searchChange},model:{value:t.query.search,callback:function(e){t.$set(t.query,"search",e)},expression:"query.search"}})],1),t._v(" "),a("span",{attrs:{slot:"tools"},slot:"tools"},[a("el-popover",{attrs:{placement:"bottom",width:"500",trigger:"click"}},[a("div",{staticStyle:{display:"flex",height:"200px"}},t._l(t.types,(function(e){return a("div",{staticStyle:{height:"50px",width:"200px",padding:"16px","margin-bottom":"10px"},on:{click:function(a){return t.jump(e)}}},[a("i",{class:e.icon}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.cname))])])})),0),t._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-plus",type:"success"},slot:"reference"},[t._v("\n          新建书签\n        ")])],1)],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"书签名称",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("span",[t._v(t._s(o.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"统计时段",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("span",[t._v(t._s(t._f("formatAnalyze")(o.data)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类型",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("span",[t._v(t._s(t._f("formatType")(o.type)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已添加到下列概览中",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("span",[t._v(t._s(t.formatDashboard(o.dashboards)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("span",[t._v(t._s(o.createTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"#",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{ref:"popover-"+e.$index,attrs:{placement:"bottom",trigger:"click",width:"320"},on:{show:function(a){return t.showPopover(e.row)}}},[a("i",{staticClass:"el-icon-edit",attrs:{slot:"reference"},slot:"reference"}),t._v(" "),a("el-form",{attrs:{model:t.updateData,"label-position":"top"}},[a("el-form-item",{attrs:{label:"书签id"}},[a("el-input",{attrs:{size:"small",disabled:""},model:{value:t.updateData.bookmarksId,callback:function(e){t.$set(t.updateData,"bookmarksId",e)},expression:"updateData.bookmarksId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"书签名称"}},[a("el-input",{attrs:{size:"small"},model:{value:t.updateData.bookmarksName,callback:function(e){t.$set(t.updateData,"bookmarksName",e)},expression:"updateData.bookmarksName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"添加至一下概览"}},[a("el-select",{attrs:{multiple:""},model:{value:t.updateData.dashboards,callback:function(e){t.$set(t.updateData,"dashboards",e)},expression:"updateData.dashboards"}},t._l(t.dashboardList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e._self.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.updateSubmit(e)}}},[t._v("确定")])],1)],1)]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.query.page,limit:t.query.limit},on:{"update:page":function(e){return t.$set(t.query,"page",e)},"update:limit":function(e){return t.$set(t.query,"limit",e)},pagination:t.fetchBookmarks}})],1)},n=[],s=(a("7f7f"),a("db97"),a("96cf"),a("1da1")),r=a("75fb"),i=a("bc5d"),l=a("333d"),c=a("6724"),u=a("9cbb"),d=a("5fd4"),m={components:{CustomHeader:i["a"],Pagination:l["a"]},directives:{waves:c["a"]},filters:{formatAnalyze:function(t){var e=JSON.parse(t);return e.toDate?"".concat(e.fromDate,"至").concat(e.toDate):"实时统计"},formatType:function(t){var e=u["a"].event_type[t];return e?e.cname:"未知类型"}},data:function(){return{listLoading:!1,list:[],dashboardList:[],total:0,query:{page:1,limit:10,type:"",search:""},types:[{cname:"元数据分析",command:"meta-event",name:"menu-analyze-meta-event",desc:"元数据详细查询分析",icon:"el-icon-hel"}],updateData:{bookmarksId:"",bookmarksName:"",dashboards:[]},btnLoading:!1}},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchDashboard();case 2:this.fetchBookmarks();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{fetchDashboard:function(){var t=this;return new Promise((function(e,a){Object(d["d"])().then((function(e){t.dashboardList=e})),e()}))},fetchBookmarks:function(){var t=this;this.listLoading=!0,Object(r["a"])(this.query).then((function(e){t.total=e.total,t.list=e.items,setTimeout((function(){t.listLoading=!1}),1e3)}))},handleSelect:function(t){this.query.type=t,this.fetchBookmarks()},resolveName:function(){var t="全部书签";for(var e in this.types)if(Object.is(this.types[e].command,this.query.type)){t=this.types[e].cname;break}return t},searchChange:function(){this.fetchBookmarks()},jump:function(t){console.log(t),this.$router.push({name:t.name,query:this.$route.query})},showPopover:function(t){this.updateData.bookmarksId=t.id,this.updateData.bookmarksName=t.name,this.updateData.dashboards=t.dashboards},updateSubmit:function(t){var e=this;this.btnLoading=!0,t.row.name=this.updateData.bookmarksName,t.row.dashboards=this.updateData.dashboards,Object(r["c"])(t.row).then((function(a){t.row.dashboards.some((function(a){e.dashboardList.some((function(e){e===a&&(e.items[t.row.id]="{}",Object(d["e"])(e).then((function(t){})))}))})),setTimeout((function(){e.btnLoading=!1,e.$refs["popover-".concat(t.$index)].doClose()}),1e3),e.$notify({title:"成功",message:"修改成功",type:"success"})})).catch((function(t){e.$notify({title:"失败",message:t.message,type:"error"})}))},formatDashboard:function(t){if(t.length<1)return"尚未加入任何概览";var e=[];return this.dashboardList.some((function(a){t.some((function(o,n){o===a.id&&(e.push(a.name),n!=t.length-1&&e.push(","))}))})),e+""}}},p=m,f=a("2877"),h=Object(f["a"])(p,o,n,!1,null,null,null);e["default"]=h.exports}}]);