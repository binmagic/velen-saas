(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d9e949b"],{"64b6":function(e,t,n){},"93a1":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"padding-app-container"},[n("el-tabs",{attrs:{value:"app_info"}},[n("el-tab-pane",{attrs:{label:e.$t("app.label.app_info"),name:"app_info"}},[n("app-info")],1),e._v(" "),n("el-tab-pane",{attrs:{label:e.$t("app.label.member_info"),name:"member_info"}},[n("member-info")],1),e._v(" "),n("el-tab-pane",{attrs:{label:e.$t("app.label.role_ability"),name:"role_ability"}},[n("role-ability")],1)],1)],1)},a=[],l=(n("96cf"),n("1da1")),r=n("5530"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"member-info"},[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("\n      "+e._s(e.$t("app.button.invite"))+"\n    ")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.memberListLoading,expression:"memberListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.memberList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:e.$t("app.label.member"),align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.account))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("app.label.role"),align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:i.role,callback:function(t){e.$set(i,"role",t)},expression:"row.role"}},e._l(e.role,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"#",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return["deleted"!=i.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleInviteDelete(i)}}},[e._v("\n          "+e._s(e.$t("app.button.del"))+"\n        ")]):e._e()]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:e.$t("app.member.dialog.title"),visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",attrs:{inline:!0,rules:e.rules,model:e.inviteTemp}},[n("el-form-item",{attrs:{label:e.$t("app.label.account")}},[n("el-input",{model:{value:e.inviteTemp.account,callback:function(t){e.$set(e.inviteTemp,"account",t)},expression:"inviteTemp.account"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-share"},on:{click:e.handleInvite}})],1)],1),e._v(" "),e.inviteList.length>0?n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.inviteList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:e.$t("app.label.member"),align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.account))])]}}],null,!1,1520291013)}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("app.label.role"),align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:i.role,callback:function(t){e.$set(i,"role",t)},expression:"row.role"}},e._l(e.role,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)]}}],null,!1,3308514863)}),e._v(" "),n("el-table-column",{attrs:{label:"#",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return["deleted"!=i.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleTempInviteDelete(i)}}},[e._v("\n            "+e._s(e.$t("app.member.button.del"))+"\n          ")]):e._e()]}}],null,!1,776397765)})],1):e._e(),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.inviteList.length>0?n("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmInvite}},[e._v("\n        "+e._s(e.$t("app.button.invite_confirm"))+"\n      ")]):e._e()],1)],1)],1)},s=[],c=n("b562"),u={name:"MemberInfo",props:{},data:function(){return{dialogFormVisible:!1,inviteList:[],inviteTemp:{},memberList:[],memberListLoading:!1,role:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]}}},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRoleList();case 2:return e.next=4,this.fetchMemberList();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchRoleList:function(){var e=this;return new Promise((function(t,n){e.$store.dispatch("role/getRoleList").then((function(n){e.role=n,t()})).catch((function(){n()}))}))},fetchMemberList:function(){var e=this;this.memberListLoading=!0,Object(c["g"])().then((function(t){e.memberList=t,e.memberListLoading=!1}))},handleCreate:function(){this.dialogFormVisible=!0},handleInvite:function(){this.inviteList.push({account:this.inviteTemp.account})},handleTempInviteDelete:function(e){for(var t in this.inviteList)if(this.inviteList[t].account==e.account)return void delete this.inviteList[t]},handleInviteDelete:function(e){var t=this;Object(c["d"])(e.id).then((function(e){t.$notify({message:"删除成功",type:"success",duration:2e3}),t.fetchMemberList()}))},handleConfirmInvite:function(){var e=this;Object(c["b"])(this.inviteList).then((function(t){e.dialogFormVisible=!1,e.$notify({message:"添加成功",type:"success",duration:2e3}),e.fetchMemberList()}))}}},p=u,m=n("2877"),d=Object(m["a"])(p,o,s,!1,null,null,null),f=d.exports,b=f,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-info"},[n("el-form",{ref:"dataForm",attrs:{"hide-required-asterisk":"",rules:e.rules,"v-model":e.temp,"label-position":"left","label-width":"150px"}},[n("el-form-item",{attrs:{label:e.$t("app.label.name")}},[n("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("app.label.desc")}},[n("el-input",{model:{value:e.temp.desc,callback:function(t){e.$set(e.temp,"desc",t)},expression:"temp.desc"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("app.label.appId")}},[n("el-input",{attrs:{disabled:!0},model:{value:e.temp.id,callback:function(t){e.$set(e.temp,"id",t)},expression:"temp.id"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("app.label.appKey")}},[n("el-input",{attrs:{disabled:!0},model:{value:e.temp.appKey,callback:function(t){e.$set(e.temp,"appKey",t)},expression:"temp.appKey"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("app.label.owner")}},[n("el-input",{attrs:{disabled:!0},model:{value:e.temp.owner,callback:function(t){e.$set(e.temp,"owner",t)},expression:"temp.owner"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.updateData()}}},[e._v("\n      "+e._s(e.$t("app.button.confirm"))+"\n    ")])],1)],1)},h=[],g={name:"AppInfo",props:{},data:function(){return{rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},temp:{id:"",name:"",desc:"",appKey:"",owner:""},loading:!1}},created:function(){this.fetchAppInfo()},methods:{fetchAppInfo:function(){var e=this;Object(c["e"])().then((function(t){e.temp=t}))},updateData:function(){var e=this;this.loading=!0;var t=Object.assign({},this.temp);delete t.state,Object(c["h"])(t).then((function(){e.loading=!1,e.$notify({message:"修改成功",type:"success",duration:2e3}),e.fetchAppInfo()}))}}},_=g,y=Object(m["a"])(_,v,h,!1,null,null,null),w=y.exports,$=w,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role_ability"},e._l(Math.max(1,e.roleList.length/3),(function(t,i){return n("el-row",{key:t,attrs:{offset:i>0?2:0}},e._l(e.roleList,(function(t){return n("el-col",{attrs:{span:8}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"text item"},[e._v("\n          "+e._s(t.name)+"\n        ")]),e._v(" "),n("div",[e._v("\n          角色成员 "+e._s(1)+"名\n        ")])])],1)})),1)})),1)},k=[],x=n("cc5e"),I={name:"RoleAbility",props:{},data:function(){return{roleList:[]}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var e=this;Object(x["d"])().then((function(t){e.roleList=t}))}}},j=I,O=(n("c9ff"),Object(m["a"])(j,L,k,!1,null,null,null)),q=O.exports,C=q,R=n("2f62"),S={components:{MemberInfo:b,AppInfo:$,RoleAbility:C},data:function(){return{}},methods:Object(r["a"])({},Object(R["b"])(["handleSelectApp"])),created:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.handleSelectApp(this.$route.query.app);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},A=S,T=Object(m["a"])(A,i,a,!1,null,null,null);t["default"]=T.exports},c9ff:function(e,t,n){"use strict";var i=n("64b6"),a=n.n(i);a.a}}]);